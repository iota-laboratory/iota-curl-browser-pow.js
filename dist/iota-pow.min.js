"use strict";var iotaPoW=function(){let e=null,t=function(t,n,f,o,r){if(null!=e){if(void 0!==r)throw"Millisecond timeout not supported with WASM run outside of worker";return new Promise(((r,i)=>{WebAssembly.instantiate(e,{env:{abort:console.error}}).then((function(e){let i=e.instance;for(let e=0;e<32;e++)i.exports.setDigest(e,parseInt(t.substring(2*e+2,2*e+4),16));i.exports.powWorker(n,Number(0xffffffffn&f),Number(f>>32n&0xffffffffn),Number(0xffffffffn&o),Number(o>>32n&0xffffffffn));let s=BigInt(i.exports.getNonceLo())+(BigInt(i.exports.getNonceHi())<<32n);r(s<=o?s:null)}))}))}{const e=Date.now(),i=243,s=3*i,a=[1,0,-1,2,1,-1,0,2,-1,1,0],l=new Int8Array(s),u=new Int8Array(s),c=new Int8Array(s);let m=function(e,t){const n=364+(e<<24>>24),f=n/27|0,o=n%27;l[t]=o%3-1,l[t+1]=(o/3|0)%3-1,l[t+2]=(o/9|0)%3-1,l[t+3]=f%3-1,l[t+4]=(f/3|0)%3-1,l[t+5]=(f/9|0)%3-1};for(let e=0;e<32;e++)m(parseInt(t.substring(2*e+2,2*e+4),16),6*e);let g,h,d,p=f,w=BigInt("0x8000000000000000");for(;p<=o&&(void 0===r||Date.now()<e+r);){d=192;for(let e=0;w>0n;e+=8)m(Number(p>>BigInt(e)&0xffn),d),d+=6,w>>=8n;g=l,h=u,d=0;for(let e=0;e<81;e++){for(let e=0;e<s;e++){const t=g[d];d<365?d+=364:d-=365;const n=g[d]<<2;h[e]=a[t+n+5]}g=h,h=g===u?c:u}let e=i-n;for(;e<i&&0===g[e];)e++;if(e==i)return Promise.resolve(p);p++,w=p&-p}return Promise.resolve(null)}};if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)return onmessage=function(n){e=n.data.wasmBuffer,t(n.data.hash,n.data.zeros,n.data.min,n.data.max,n.data.timeout).then((e=>{postMessage({nonce:e})}))},null;{let n=null,f=function(f,o,r,i,s,a){if(!/^0x[0-9a-f]{64}$/.test(f))throw"Invalid block hash: "+f;return s||(s=BigInt("0x7fffffffffffffff")),i>0?new Promise(((t,l)=>{const u=[];let c=0;for(let e=0;e<i;e++){const e=new Worker(n);u.push(e),e.onmessage=function(e){let n=e.data.nonce;if(!(null==n&&(c++,c<u.length))){for(var f of u)f.terminate();t(n)}}}const m=(s-r)/BigInt(u.length);let g=r,h=s-m*BigInt(u.length-1);for(let t=0;t<u.length;t++)u[t].postMessage({wasmBuffer:e,hash:f,zeros:o,min:g,max:h,timeout:a}),g=h,h+=m;void 0!==a&&setTimeout((function(){for(var e of u)e.terminate();t(null)}),a)})):t(f,o,r,s,a)};return f.initWorker=function(e){n=e},f.initWasm=function(t){null===t||t instanceof ArrayBuffer?e=t:fetch(t).then((e=>e.arrayBuffer())).then((t=>{e=t}))},f}}();