"use strict";var iotaPoW=function(){let e=null,n=function(n,t,f,o,r){if(null!=e){if(void 0!==r)throw"Millisecond timeout not supported with WASM run outside of worker";return new Promise(((r,s)=>{WebAssembly.instantiate(e,{env:{abort:console.error}}).then((function(e){let s=e.instance;for(let e=0;e<32;e++)s.exports.setDigest(e,parseInt(n.substring(2*e+2,2*e+4),16));s.exports.powWorker(t,Number(0xffffffffn&f),Number(f>>32n&0xffffffffn),Number(0xffffffffn&o),Number(o>>32n&0xffffffffn));let i=BigInt(s.exports.getNonceLo())+(BigInt(s.exports.getNonceHi())<<32n);r(i<=o?i:null)}))}))}{const e=Date.now(),s=243,i=3*s,l=[1,0,-1,2,1,-1,0,2,-1,1,0],a=new Int8Array(i),u=new Int8Array(i),c=new Int8Array(i);let m=function(e,n){const t=364+(e<<24>>24),f=t/27|0,o=t%27;a[n]=o%3-1,a[n+1]=(o/3|0)%3-1,a[n+2]=(o/9|0)%3-1,a[n+3]=f%3-1,a[n+4]=(f/3|0)%3-1,a[n+5]=(f/9|0)%3-1};for(let e=0;e<32;e++)m(parseInt(n.substring(2*e+2,2*e+4),16),6*e);let g,h,d,p=f,w=BigInt("0x8000000000000000");for(;p<=o&&(void 0===r||Date.now()<e+r);){d=192;for(let e=0;w>0n;e+=8)m(Number(p>>BigInt(e)&0xffn),d),d+=6,w>>=8n;g=a,h=u,d=0;for(let e=0;e<81;e++){for(let e=0;e<i;e++){const n=g[d];d<365?d+=364:d-=365;const t=g[d]<<2;h[e]=l[n+t+5]}g=h,h=g===u?c:u}let e=s-t;for(;e<s&&0===g[e];)e++;if(e==s)return Promise.resolve(p);p++,w=p&-p}return Promise.resolve(null)}};if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)return onmessage=function(t){e=t.data.wasmBuffer,n(t.data.hash,t.data.zeros,t.data.min,t.data.max).then((e=>{postMessage({nonce:e})}))},null;{let t=null,f=function(f,o,r,s,i,l){if(!/^0x[0-9a-f]{64}$/.test(f))throw"Invalid block hash: "+f;return i||(i=BigInt("0x7fffffffffffffff")),s>0?new Promise(((n,a)=>{const u=[];let c=0;for(let e=0;e<s;e++){const e=new Worker(t);u.push(e),e.onmessage=function(e){let t=e.data.nonce;if(!(null==t&&(c++,c<u.length))){for(var f of u)f.terminate();n(t)}}}const m=(i-r)/BigInt(u.length);let g=r,h=i-m*BigInt(u.length-1);for(let n=0;n<u.length;n++)u[n].postMessage({wasmBuffer:e,hash:f,zeros:o,min:g,max:h,timeout:l}),g=h,h+=m;void 0!==l&&setTimeout((function(){for(var e of u)e.terminate();n(null)}),l)})):n(f,o,r,i,l)};return f.initWorker=function(e){t=e},f.initWasm=function(n){null===n||n instanceof ArrayBuffer?e=n:fetch(n).then((e=>e.arrayBuffer())).then((n=>{e=n}))},f}}();